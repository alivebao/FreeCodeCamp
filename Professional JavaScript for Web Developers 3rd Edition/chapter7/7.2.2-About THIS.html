<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>7.2.2-About THIS</title>
</head>
<body>
<p>Different between three exp.</p>
<ul>
    <li>In Exp1, console.log print "The Window", it's because getName in obj return a anonymous function, the function return "this.name". "obj.getName()" equals <em><pre>
    function(){
        return this.name
    }</em></pre>"obj.getName()()" equals "this.name" called by global. THIS here equals "window", so this.name === "The Window"
    </li>
    
    <li>In Exp2, console.log print "The Obj". "obj.getName()()" equals "that.name", "that" is a value in obj.getName, assigned by "THIS" of obj, so that.name === "The Obj"
    </li>
    
    <li>In Exp3, first console.log print "The Obj", "obj.getName()" equals "this.name", and it's called by obj, THIS here equals "obj", so this.name === "The Obj".<br/>
    second console.log print <strong>"The Window",</strong> <br/><em style="color:red;font-size:5em">WHY?</em><br/>The book said that's because after an assignment statement, value of THIS can not be hold, it would change to global. So "this.name" returned "The Obj"
    </li>
</ul>
<pre>
Test code:
//Exp1
var name = "The Window"
var obj = {
    name: "My Obj",
    getName: function(){
        return function(){
            return this.name;
        }
    }
};
console.log(obj.getName()());
//Exp2
obj.getName = function(){
    var that = this;
    return function(){
        return that.name;
    }
};
console.log(obj.getName()());
//Exp3
obj.getName = function(){
    return this.name;
}
console.log(obj.getName());
console.log((obj.getName = obj.getName)());
</pre>
<script>
//Exp1
var name = "The Window"
var obj = {
    name: "My Obj",
    getName: function(){
        return function(){
            return this.name;
        }
    }
};
console.log(obj.getName()());
//Exp2
obj.getName = function(){
    var that = this;
    return function(){
        return that.name;
    }
};
console.log(obj.getName()());
//Exp3
obj.getName = function(){
    return this.name;
}
console.log(obj.getName());
console.log((obj.getName = obj.getName)());
</script>
</body>
</html>